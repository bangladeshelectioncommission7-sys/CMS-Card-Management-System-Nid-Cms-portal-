l<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>NID Correction Portal ‚Äî CMS</title>

<style>
:root{--blue:#003366;--muted:#5f6b7a;--card-bg:#fff}
*{box-sizing:border-box}

/* ‚úÖ Mobile white-block (horizontal overflow) fix */
html,body{width:100%;overflow-x:hidden}

body{
  font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,'Noto Sans',Arial;
  background:#f1f6fb;
  margin:0;
  color:#0b2447;
}

header{
  background:var(--blue);
  color:#fff;
  padding:14px 20px;
  display:flex;
  align-items:center;
  justify-content:space-between
}
header .brand{font-weight:700;font-size:18px}

.container{
  max-width:1120px;
  margin:20px auto;
  padding:0 16px;
  width:100%;
  overflow-x:hidden;
}

.muted{color:var(--muted);font-size:13px}

.app-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 16px;
  background:var(--blue);
  color:#fff;
  border-radius:8px 8px 0 0
}

.panel{
  background:#e9f2fb;
  padding:18px;
  border-radius:0 0 8px 8px;
  border:1px solid #cddff3;
  width:100%;
  overflow-x:hidden;
}

.search-row{display:flex;gap:10px;margin-bottom:10px;flex-wrap:wrap}
.search-row input{
  flex:1;
  min-width:180px;
  padding:10px 12px;
  border:1px solid #cddff3;
  border-radius:8px;
  outline:none;
  background:#fff;
}
.search-row input:focus{border-color:#9bbce0;box-shadow:0 0 0 3px rgba(0,51,102,.12)}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:12px;
  background:#fff;
  border-radius:10px;
}

thead th{
  background:#d9e8f8;
  color:#003366;
  text-align:left;
  padding:12px;
  border-bottom:1px solid #cddff3;
  white-space:nowrap;
}

tbody td{
  padding:12px;
  border-bottom:1px solid #eef3f8;
  vertical-align:middle
}

.status-chip{padding:6px 10px;border-radius:14px;border:1px solid #e6f0ff;font-weight:600;font-size:13px;display:inline-block;white-space:nowrap}
.status-pending{background:#fff3cd;border-color:#ffe8a8;color:#856404}
.status-rejected{background:#f8d7da;border-color:#f5c6cb;color:#721c24}
.status-approved{background:#d4edda;border-color:#b7e8c7;color:#155724}
.eye{cursor:pointer;font-size:18px;color:var(--blue)}
.center{text-align:center}
.hidden{display:none!important}

/* ‚úÖ Results wrap = only this area scrolls horizontally on mobile (NOT whole page) */
#resultsWrap{
  display:none;
  background:#e9f2fb;
  border:1px solid #cddff3;
  border-radius:10px;
  padding:8px;
  max-width:100%;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
}

/* ‚úÖ keep table readable on mobile */
#resultsWrap table{min-width:760px}

/* ‚úÖ user request: results table ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶≤‡¶Æ‡ßç‡¶¨‡¶æ + ‡¶Æ‡ßã‡¶ü‡¶æ */
#resultsWrap table{font-size:15.5px}
#resultsWrap thead th{padding:14px 14px;font-weight:800}
#resultsWrap tbody td{padding:14px 14px;font-weight:600}

/* Detail page */
#detailPage{display:none;position:fixed;inset:0;background:#f1f6fb;z-index:9999;overflow:auto}
.detail-header{background:var(--blue);color:#fff;padding:12px 18px;display:flex;align-items:center;gap:12px;position:sticky;top:0;z-index:3}
.detail-card{max-width:1060px;margin:18px auto;background:#fff;padding:18px;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,0.08)}
.detail-table{width:100%;border-collapse:collapse;margin-top:8px}
.detail-table th,.detail-table td{border:1px solid #eef6ff;padding:10px}
.spinner{width:22px;height:22px;border-radius:50%;border:4px solid #f1f5fb;border-top-color:var(--blue);animation:spin 1s linear infinite;display:inline-block;vertical-align:middle}
@keyframes spin{to{transform:rotate(360deg)}}
.msg-success{color:#0b7028;font-weight:700;margin-top:12px}
.msg-info{color:#0b63b6;font-weight:700;margin-top:12px}
.controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.back-btn{background:transparent;border:1px solid rgba(255,255,255,0.25);color:#fff;padding:8px 12px;border-radius:8px;cursor:pointer}
.footer-note{font-size:13px;color:var(--muted);margin-top:10px}

/* Buttons */
.btn{padding:10px 18px;border-radius:8px;border:none;font-weight:600;cursor:pointer;transition:all .2s;background:var(--blue);color:#fff}
.btn:active{transform:scale(.98)}
.btn.secondary{background:#eef4ff;color:var(--blue);border:1px solid #d6e4ff}
.btn.secondary:hover{background:#dbe9ff}

/* AUTH */
.auth-wrapper{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#003366 0%,#001f3f 100%);padding:20px}
.auth-box{width:100%;max-width:420px;background:#fff;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,0.28);overflow:hidden}
.auth-header{background:var(--blue);color:#fff;padding:28px 24px 20px;text-align:center}
.auth-header h2{margin:0;font-size:1.55rem;font-weight:700}
.auth-header .subtitle{margin-top:8px;font-size:.92rem;opacity:.9}
.auth-body{padding:28px 24px 32px;background:#fff}
.input-group{position:relative;margin-bottom:18px}
.input-group input{width:100%;padding:13px 16px 13px 14px;border:1px solid #cddff3;border-radius:10px;font-size:15px}
.input-group input:focus{outline:none;border-color:#9bbce0;box-shadow:0 0 0 3px rgba(0,51,102,.12)}
.input-group .toggle-eye{position:absolute;right:14px;top:50%;transform:translateY(-50%);cursor:pointer;color:var(--muted);font-size:1.1rem;user-select:none}
.auth-btn{width:100%;padding:13px;background:var(--blue);color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:800;cursor:pointer}
.auth-btn.loading{pointer-events:none;opacity:.9}
.auth-footer{text-align:center;font-size:.81rem;color:#8899aa;padding:0 24px 24px}

@media(max-width:900px){.detail-card{margin:10px}}
</style>
</head>

<body>

<!-- LOGIN / OTP -->
<div class="auth-wrapper" id="authWrapper">
  <div class="auth-box">
    <div class="auth-header">
      <h2>CMS Card Management System</h2>
      <div class="subtitle">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶Æ‡¶ø‡¶∂‡¶®<br>‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§ ‡¶ï‡¶∞‡ßç‡¶Æ‡¶ï‡¶∞‡ßç‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø</div>
    </div>

    <div class="auth-body">
      <div id="loginSection" style="display:block;">
        <div class="input-group">
          <input type="text" id="userId" placeholder="User ID / ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø" autocomplete="off">
        </div>
        <div class="input-group">
          <input type="password" id="userPass" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°" autocomplete="off">
          <span class="toggle-eye" onclick="togglePass()">üëÅ</span>
        </div>
        <button class="auth-btn" id="loginBtn" type="button">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
      </div>

      <div id="otpSection" style="display:none;">
        <div style="text-align:center; margin-bottom:20px; color:#334155;">
          <strong>OTP ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á</strong><br>
          <small>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡ß¨ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶ï‡ßã‡¶°‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡¶æ‡¶®</small>
        </div>
        <div class="input-group">
          <input type="text" inputmode="numeric" pattern="[0-9]*" id="otpInput"
                 placeholder="‡ß¨ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶∞ OTP" maxlength="6" autocomplete="one-time-code">
        </div>
        <button class="auth-btn" id="verifyOtpBtn" type="button">‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡ßÅ‡¶®</button>
      </div>
    </div>

    <div class="auth-footer">
      ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶Æ‡¶ø‡¶∂‡¶® ‚Ä¢ CMS Protected ‚Ä¢ ¬© 2025-2026 BEC
    </div>
  </div>
</div>

<header style="display:none" id="mainHeader">
  <div class="brand">Bangladesh Election Commission</div>
  <div class="muted">NID Correction Management</div>
</header>

<div class="container" style="display:none" id="mainContainer">
  <div id="appArea">
    <div class="app-header">
      <div style="display:flex;align-items:center;gap:12px">
        <img id="topLogo" src="" alt="" style="height:44px;display:none;border-radius:6px;padding:4px;background:#fff"/>
        <div>
          <div style="font-weight:800">NID Correction Portal</div>
          <div style="font-size:13px" class="muted">Search and review correction requests</div>
        </div>
      </div>
      <div style="display:flex;gap:12px;align-items:center">
        <button class="btn secondary" id="logoutBtn" type="button">Logout</button>
      </div>
    </div>

    <div class="panel">
      <div class="search-row">
        <input id="nidInput" type="text" placeholder="Enter NID"/>
        <button class="btn" id="searchBtn" type="button">Search</button>
      </div>

      <div id="searchMsg" style="display:none;color:#c0392b;margin-bottom:8px"></div>

      <div id="resultsWrap">
        <table>
          <thead>
            <tr>
              <th style="width:36px"></th>
              <th>ID</th>
              <th>Applicant Name</th>
              <th>NID</th>
              <th>Status</th>
              <th>Category</th>
              <th>Source</th>
              <th style="width:80px">Action</th>
            </tr>
          </thead>
          <tbody id="resultsBody"></tbody>
        </table>
      </div>

      <div class="footer-note">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶Æ‡¶ø‡¶∂‡¶® ‡¶∏‡¶ö‡¶ø‡¶¨‡¶æ‡¶≤‡ßü‡•§</div>
    </div>
  </div>
</div>

<!-- DETAIL PAGE -->
<div id="detailPage">
  <div class="detail-header">
    <button class="back-btn" id="backToMain" type="button">‚Üê Back</button>
    <div style="font-weight:800">Applied Change</div>
  </div>

  <div class="detail-card">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;gap:10px;flex-wrap:wrap">
      <div style="font-size:16px;font-weight:800;color:#003366" id="detailTitle">Application Details</div>
      <div class="muted" id="detailMeta">ID: - | Category: -</div>
    </div>

    <table class="detail-table">
      <thead>
        <tr style="background:#f7fbff;color:#003366">
          <th style="width:48px;text-align:center"></th>
          <th>Field</th>
          <th>‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶§‡¶•‡ßç‡¶Ø</th>
          <th>‡¶ö‡¶æ‡¶π‡¶ø‡¶§ ‡¶§‡¶•‡ßç‡¶Ø</th>
        </tr>
      </thead>
      <tbody id="detailRows"></tbody>
    </table>

    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:14px;gap:10px;flex-wrap:wrap">
      <div id="detailNote" class="muted">Notes: none</div>

      <div class="controls">
        <div id="detailLoader" style="display:none">
          <span class="spinner"></span><span style="margin-left:8px" class="muted">Processing...</span>
        </div>
        <button id="approveBtn" class="btn" type="button">Approve</button>
        <button id="cancelBtn" class="btn secondary" type="button">Cancel</button>
        <button id="rollbackBtn" class="btn secondary" style="display:none" type="button">Rollback</button>
      </div>
    </div>

    <div id="detailMsg" style="display:none;margin-top:12px"></div>
  </div>
</div>

<script>
/* ===== Helpers ===== */
function el(id){ return document.getElementById(id); }
function uuid(){ return 'APP' + Math.random().toString(36).slice(2, 9).toUpperCase(); }
function storageKey(n){ return 'ec_nid_' + n; }
function saveState(n, o){ localStorage.setItem(storageKey(n), JSON.stringify(o)); }
function loadState(n){
  const v = localStorage.getItem(storageKey(n));
  return v ? JSON.parse(v) : null;
}

/* ‚úÖ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶π‡¶ø‡¶¶‡¶æ‡¶Æ‡¶§‡ßã CURRENT INFO */
const BASE_CURRENT = {
  name: '‡¶Æ‡¶®‡¶ø‡¶∞ ‡¶Æ‡¶ø‡ßü‡¶æ',
  name_en: 'Monir Miah',
  birthday: '‡ß®‡ß´-‡ß¶‡ßØ-‡ßß‡ßØ‡ßÆ‡ß©',
  birthplace: '‡¶¢‡¶æ‡¶ï‡¶æ'
};

const CATEGORY_LIST = ['Kha','Kha','Kha','Kha'];

/* Defaults */
sessionStorage.setItem('ec_selected_category', sessionStorage.getItem('ec_selected_category') || 'Kha');
sessionStorage.setItem('ec_app_count', sessionStorage.getItem('ec_app_count') || '2');

/* Logo (optional) */
window.addEventListener('load', () => {
  const l = localStorage.getItem('ec_logo');
  if (l && el('topLogo')) {
    el('topLogo').src = l;
    el('topLogo').style.display = 'block';
  }
});

/* Search */
el('searchBtn').onclick = doSearch;
el('nidInput').onkeydown = e => { if(e.key==='Enter') doSearch(); };

function doSearch(){
  const nid = el('nidInput').value.trim();
  const msg = el('searchMsg');

  msg.style.display='none';
  el('resultsWrap').style.display='none';

  if(!nid || nid.length < 5){
    msg.textContent='Please enter a valid NID.';
    msg.style.display='block';
    return;
  }

  el('searchBtn').disabled = true;
  const prev = el('searchBtn').textContent;
  el('searchBtn').innerHTML = '<span class="spinner"></span>';

  setTimeout(()=>{
    el('searchBtn').disabled = false;
    el('searchBtn').textContent = prev;

    let st = loadState(nid);
    const selCat = sessionStorage.getItem('ec_selected_category') || 'Kha';
    const count = parseInt(sessionStorage.getItem('ec_app_count'),10) || 2;

    if(!st){
      const current = JSON.parse(JSON.stringify(BASE_CURRENT));
      current.nid = nid;

      const requests = [];
      const startIdx = Math.max(0, CATEGORY_LIST.indexOf(selCat));

      for(let i=0;i<count;i++){
        const cat = CATEGORY_LIST[(startIdx+i)%4];
        const status = (i < count-1) ? 'Rejected' : 'Pending';

        /* ‚úÖ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶π‡¶ø‡¶¶‡¶æ‡¶Æ‡¶§‡ßã DESIRED INFO */
        const newValues = {
          name: '‡¶Æ‡ßã‡¶É ‡¶Æ‡¶®‡¶ø‡¶∞ ‡¶π‡ßã‡¶∏‡ßá‡¶®',
          name_en: 'MD MONIR HOSSAIN',
          birthday: '‡ß¶‡ß´-‡ßß‡ß¶-‡ßß‡ßØ‡ßÆ‡ß¶',
          birthplace: '‡¶®‡¶æ‡¶∞‡¶æ‡ßü‡¶£‡¶ó‡¶û‡ßç‡¶ú'
        };

        const oldValues = JSON.parse(JSON.stringify(current));

        requests.push({
          id: uuid(),
          category: cat,
          status,
          oldValues,
          newValues,
          notes: '‡¶∏‡¶Ç‡¶∂‡ßã‡¶ß‡¶®‡ßá‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß',
          previousApplied: null
        });
      }

      st = { current, requests };
      saveState(nid, st);
    }

    sessionStorage.setItem('ec_last_nid', nid);
    renderResults(nid, st);
    el('resultsWrap').style.display='block';
  }, 700);
}

function renderResults(nid, state){
  const tbody = el('resultsBody');
  tbody.innerHTML = '';

  state.requests.forEach((r, idx)=>{
    const tr = document.createElement('tr');

    const statusClass = (r.status||'').includes('Approved')
      ? 'status-approved'
      : (r.status==='Pending' ? 'status-pending' : 'status-rejected');

    tr.innerHTML = `
      <td><input type="checkbox"/></td>
      <td class="muted">${r.id}</td>
      <td>${state.current?.name || '-'}</td>
      <td>${nid}</td>
      <td><span class="status-chip ${statusClass}">${r.status}</span></td>
      <td>${r.category}</td>
      <td class="muted">ONLINE</td>
      <td class="center"><span class="eye" data-idx="${idx}" title="View details">üëÅ</span></td>
    `;
    tbody.appendChild(tr);
  });

  document.querySelectorAll('.eye').forEach(e=>{
    e.onclick = ()=>{
      const idx = parseInt(e.getAttribute('data-idx'),10);
      const n = sessionStorage.getItem('ec_last_nid');
      const s = loadState(n);
      if(s) openDetailPage(n, idx, s);
    };
  });
}

/* Detail Page */
function openDetailPage(nid, idx, state){
  el('appArea').style.display = 'none';
  el('detailPage').style.display = 'block';

  const req = state.requests[idx];

  el('detailTitle').textContent = 'Application Details';
  el('detailMeta').textContent = `ID: ${req.id} | Category: ${req.category}`;

  const fields = [
    { label:'‡¶®‡¶æ‡¶Æ (‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ)', key:'name' },
    { label:'‡¶®‡¶æ‡¶Æ (‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø)', key:'name_en' },
    { label:'‡¶ú‡¶®‡ßç‡¶Æ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ', key:'birthday' },
    { label:'‡¶ú‡¶®‡ßç‡¶Æ‡¶∏‡ßç‡¶•‡¶æ‡¶®', key:'birthplace' }
  ];

  const tbody = el('detailRows');
  tbody.innerHTML = '';
  fields.forEach((f,i)=>{
    const oldV = req.oldValues?.[f.key] ?? '-';
    const newV = req.newValues?.[f.key] ?? '-';
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td style="text-align:center"><input type="checkbox" ${i<2?'checked':''}></td>
      <td>${f.label}</td>
      <td>${oldV}</td>
      <td>${newV}</td>
    `;
    tbody.appendChild(tr);
  });

  el('detailNote').textContent = req.notes ? `Notes: ${req.notes}` : 'Notes: none';

  const approveBtn = el('approveBtn');
  const cancelBtn  = el('cancelBtn');
  const rollbackBtn = el('rollbackBtn');
  const loader = el('detailLoader');
  const msg = el('detailMsg');

  msg.style.display='none';
  loader.style.display='none';

  approveBtn.disabled = false;
  cancelBtn.disabled = false;

  if((req.status||'').includes('Approved')){
    approveBtn.style.display='none';
    cancelBtn.style.display='none';
    rollbackBtn.style.display='inline-block';
    msg.style.display='block';
    msg.className='msg-success';
    msg.textContent='Approval successful.';
  }else if(req.status==='Rejected'){
    approveBtn.style.display='none';
    cancelBtn.style.display='none';
    rollbackBtn.style.display='inline-block';
    msg.style.display='block';
    msg.className='msg-info';
    msg.textContent='This application is rejected.';
  }else{
    approveBtn.style.display='inline-block';
    cancelBtn.style.display='inline-block';
    rollbackBtn.style.display='none';
  }

  approveBtn.onclick = ()=>{
    approveBtn.disabled=true;
    cancelBtn.disabled=true;
    loader.style.display='inline-block';

    setTimeout(()=>{
      loader.style.display='none';

      req.previousApplied = JSON.parse(JSON.stringify(state.current));
      state.current = { ...state.current, ...req.newValues };
      state.requests[idx].status = 'Approved by ' + req.category;
      saveState(nid, state);

      msg.style.display='block';
      msg.className='msg-success';
      msg.textContent='‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶® ‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§';

      approveBtn.style.display='none';
      cancelBtn.style.display='none';
      rollbackBtn.style.display='inline-block';

      renderResults(nid, state);
    }, 1200);
  };

  cancelBtn.onclick = ()=>{
    if(!confirm('Are you sure to reject this application?')) return;

    approveBtn.disabled=true;
    cancelBtn.disabled=true;
    loader.style.display='inline-block';

    setTimeout(()=>{
      loader.style.display='none';

      req.previousApplied = null;
      state.requests[idx].status = 'Rejected';
      saveState(nid, state);

      msg.style.display='block';
      msg.className='msg-info';
      msg.textContent='Application rejected.';

      approveBtn.style.display='none';
      cancelBtn.style.display='none';
      rollbackBtn.style.display='inline-block';

      renderResults(nid, state);
    }, 900);
  };

  rollbackBtn.onclick = ()=>{
    loader.style.display='inline-block';

    setTimeout(()=>{
      loader.style.display='none';

      if(req.previousApplied){
        state.current = JSON.parse(JSON.stringify(req.previousApplied));
        req.previousApplied = null;
      }
      state.requests[idx].status = 'Pending';
      saveState(nid, state);

      msg.style.display='block';
      msg.className='msg-info';
      msg.textContent='Reverted to Pending.';

      approveBtn.style.display='inline-block';
      cancelBtn.style.display='inline-block';
      rollbackBtn.style.display='none';

      renderResults(nid, state);
    }, 900);
  };

  el('backToMain').onclick = ()=>{
    el('detailPage').style.display='none';
    el('appArea').style.display='block';

    const n = sessionStorage.getItem('ec_last_nid');
    if(n){
      const s = loadState(n);
      if(s) renderResults(n, s);
    }
  };
}

/* Login + OTP */
const FIXED_OTP = "707390";

function togglePass(){
  const p = el('userPass');
  p.type = (p.type === 'password') ? 'text' : 'password';
}

el('loginBtn').onclick = function(){
  const uid = el('userId').value.trim();
  const pass = el('userPass').value.trim();
  if(!uid || !pass){
    alert('‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶ì ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®');
    return;
  }
  this.textContent = '‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
  this.classList.add('loading');
  setTimeout(()=>{
    el('loginSection').style.display='none';
    el('otpSection').style.display='block';
    this.textContent='‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®';
    this.classList.remove('loading');
  }, 1200);
};

el('verifyOtpBtn').onclick = function(){
  const otp = el('otpInput').value.trim();
  if(otp !== FIXED_OTP){
    alert('‡¶≠‡ßÅ‡¶≤ OTP ‡¶ï‡ßã‡¶°');
    return;
  }
  el('authWrapper').style.display='none';
  el('mainHeader').style.display='flex';
  el('mainContainer').style.display='block';
};

/* Logout */
el('logoutBtn').onclick = ()=> location.reload();
</script>

</body>
</html>
